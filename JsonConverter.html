<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON ç¾åŒ– - åœ¨çº¿å·¥å…·é›†</title>
    <link rel="stylesheet" href="common.css">
</head>
<body>
    <div class="container">
        <!-- ä¾§è¾¹æ  -->
        <aside class="sidebar">
            <div class="logo">
                <span>ğŸ”§</span>
                <span>å·¥å…·ç®±</span>
            </div>
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">
                            <span class="nav-icon">â—</span>
                            <span>å…¨éƒ¨å·¥å…·</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="JsonConverter.html" class="nav-link active">
                            <span class="nav-icon">{}</span>
                            <span>JSON ç¾åŒ–</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="Base64.html" class="nav-link">
                            <span class="nav-icon">ğŸ” </span>
                            <span>Base64 ç¼–è§£ç </span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="TransFormat.html" class="nav-link">
                            <span class="nav-icon">âš¡</span>
                            <span>æ ¼å¼è½¬æ¢å™¨</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="ToSplit.html" class="nav-link">
                            <span class="nav-icon">â†”ï¸</span>
                            <span>åˆ—è½¬è¡Œå·¥å…·</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main-content">
            <div class="page-header">
                <h1 class="page-title">JSON ç¾åŒ–</h1>
                <p class="page-description">
                    å…è´¹åœ¨çº¿ JSON æ ¼å¼åŒ–å·¥å…·ï¼Œæ”¯æŒ JSON ä»£ç æ ¼å¼åŒ–ã€ç¾åŒ–ã€å‹ç¼©ã€éªŒè¯ã€‚æ‰€æœ‰å¤„ç†åœ¨æœ¬åœ°å®Œæˆï¼Œä¿æŠ¤æ‚¨çš„éšç§å®‰å…¨ã€‚
                </p>
            </div>

            <div class="tool-card">
                <div class="textarea-wrapper">
                    <label class="textarea-label">è¾“å…¥ JSON</label>
                    <textarea id="input" rows="10" placeholder="åœ¨æ­¤è¾“å…¥ JSON å†…å®¹..."></textarea>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="formatJson()">
                        âœ¨ æ ¼å¼åŒ–
                    </button>
                    <button class="btn btn-secondary" onclick="compressJson()">
                        ğŸ“¦ å‹ç¼©
                    </button>
                    <button class="btn btn-outline" onclick="clearAll()">
                        ğŸ—‘ï¸ æ¸…ç©º
                    </button>
                </div>

                <div id="error-message" class="error-message"></div>

                <div class="textarea-wrapper">
                    <label class="textarea-label">è½¬æ¢ç»“æœ</label>
                    <textarea id="output" rows="12" placeholder="æ ¼å¼åŒ–åçš„ JSON å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..." readonly></textarea>
                </div>

                <div class="button-group">
                    <button class="btn btn-success" onclick="copyResult()">
                        ğŸ“‹ å¤åˆ¶ç»“æœ
                    </button>
                </div>
            </div>

            <footer class="footer">
                <p>Â© 2025 åœ¨çº¿å·¥å…·é›†. æ‰€æœ‰å¤„ç†åœ¨æœ¬åœ°å®Œæˆ</p>
            </footer>
        </main>
    </div>

    <script>
        function formatJson() {
            const input = document.getElementById('input').value;
            const errorMessage = document.getElementById('error-message');
            const output = document.getElementById('output');

            if (!input.trim()) {
                showError('è¯·è¾“å…¥ JSON å†…å®¹');
                return;
            }

            try {
                const parsedInput = JSON.parse(input);
                output.value = JSON.stringify(parsedInput, null, 2);
                hideError();
            } catch (e) {
                showError('JSON æ ¼å¼é”™è¯¯ï¼š' + e.message);
                output.value = '';
            }
        }

        function compressJson() {
            const input = document.getElementById('input').value;
            const errorMessage = document.getElementById('error-message');
            const output = document.getElementById('output');

            if (!input.trim()) {
                showError('è¯·è¾“å…¥ JSON å†…å®¹');
                return;
            }

            try {
                const parsedInput = JSON.parse(input);
                output.value = JSON.stringify(parsedInput);
                hideError();
            } catch (e) {
                showError('JSON æ ¼å¼é”™è¯¯ï¼š' + e.message);
                output.value = '';
            }
        }

        function clearAll() {
            document.getElementById('input').value = '';
            document.getElementById('output').value = '';
            hideError();
        }

        function copyResult() {
            const output = document.getElementById('output');
            if (!output.value) {
                showError('æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹');
                return;
            }
            
            output.select();
            document.execCommand('copy');
            
            // ä¸´æ—¶æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            const originalError = document.getElementById('error-message').innerHTML;
            document.getElementById('error-message').style.backgroundColor = '#f0fdf4';
            document.getElementById('error-message').style.color = '#16a34a';
            showError('âœ“ å¤åˆ¶æˆåŠŸï¼');
            
            setTimeout(() => {
                hideError();
                document.getElementById('error-message').style.backgroundColor = '';
                document.getElementById('error-message').style.color = '';
            }, 2000);
        }

        function showError(message) {
            const errorElement = document.getElementById('error-message');
            errorElement.textContent = message;
            errorElement.classList.add('show');
        }

        function hideError() {
            const errorElement = document.getElementById('error-message');
            errorElement.textContent = '';
            errorElement.classList.remove('show');
        }
    </script>
</body>
</html>
